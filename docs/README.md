<div align="center">

![header](https://capsule-render.vercel.app/api?type=waving&color=gradient&customColorList=7&animation=fadeIn&height=230&section=header&text=우아한테크코스%20Precourse%204주차&desc=🎄%20크리스마스%20프로모션%20-%20변해빈&fontSize=40&fontAlign=50&fontAlignY=33&descSize=20&descAlign=50&descAlignY=55)

</div>

---

## 🎄 82명의 리뷰어에게 전하는 프리코스 마지막 이야기


    12월 25일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!
    
    <주문 메뉴>
    아이스크림 2개
    
    <할인 전 총주문 금액>
    10,000원
    
    <증정 메뉴>
    없음
    
    <혜택 내역>
    크리스마스 디데이 할인: -3,400원
    평일 할인: -4,046원
    특별 할인: -1,000원
    
    <총혜택 금액>
    -8,446원
    
    <할인 후 예상 결제 금액>
    1,554원
    
    <12월 이벤트 배지>
    별


- 프리코스를 열심히 완주한 당신! 이번 크리스마스 🎄 `우테코 식당`으로 모여주세요.<br/>
맛있는 `1,554원의 아이스크림`과 `별 배지`가 기다리고 있답니다.
- 지난 3주 동안, 성장곡선을 [지수함수](https://terms.naver.com/entry.naver?docId=1144291&cid=40942&categoryId=32219)로 그릴 수 있도록 만들어 주신 82명의 크루 여러분들! <br>크리스마스에 우테코 식당에서 같이 아이스크림 먹어요! ~~(제가 사겠습니다)~~
- 추신) `지수함수` 질문 안받습니다. 저는 `경제학과`입니다. ^____^!

<br>

## 📦&nbsp;&nbsp;패키지 구조

[//]: # (<img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/3ef9d8a2-d4bb-42a1-900f-754799cac3fd" height="32px">&nbsp;&nbsp;FinalResponse</b>)

<div align="center">
<table>
    <tr>
        <th align="center">Package</th>
        <th align="center">Class</th>
        <th align="center">Description</th>
    </tr>
    <tr>
        <td rowspan="3"><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/2f32b4cd-187c-4b92-a136-2d86cd3341cd" width="18px">&nbsp;&nbsp;controller</b></td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;OrderController</b></td>
        <td>주문 목록 입력 요청 / 결과 출력</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;PromotionController</b></td>
        <td>할인, 증정 등 <b>프로모션 혜택 결과 출력</b> 컨트롤러</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;VisitDayController</b></td>
        <td><b>방문 일자 입력 요청 / 결과 출력 </b>컨트롤러</td>
    </tr>
    <tr>
        <td rowspan="5"><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/2f32b4cd-187c-4b92-a136-2d86cd3341cd" width="18px">&nbsp;&nbsp;controller</b><br>➜&nbsp;&nbsp;dto</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/3ef9d8a2-d4bb-42a1-900f-754799cac3fd" height="32px">&nbsp;&nbsp;BadgeResponse</b></td>
        <td><b>이벤트 배지</b> DTO</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/3ef9d8a2-d4bb-42a1-900f-754799cac3fd" height="32px">&nbsp;&nbsp;DiscountResponse</b></td>
        <td><b>할인 프로모션 종류 및 가격, 총 할인 금액</b> DTO</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/3ef9d8a2-d4bb-42a1-900f-754799cac3fd" height="32px">&nbsp;&nbsp;GiftResponse</b></td>
        <td><b>증정 프로모션 종류 및 갯수, 총 증정품 금액</b> DTO</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/3ef9d8a2-d4bb-42a1-900f-754799cac3fd" height="32px">&nbsp;&nbsp;OrderResponse</b></td>
        <td><b>사용자의 주문 메뉴와 갯수</b>를 갖는 DTO</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/3ef9d8a2-d4bb-42a1-900f-754799cac3fd" height="32px">&nbsp;&nbsp;VisitDayResponse</b></td>
        <td><b>방문월, 방문일</b> DTO</td>
    </tr>
    <tr><td colspan="3"></td></tr>
    <tr>
        <td rowspan="2"><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/f16a8719-281f-4535-a958-c1c62d69cfa2" width="18px">&nbsp;&nbsp;<b>domain<br></b>➜&nbsp;&nbsp;consumer</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;Orders</b></td>
        <td><b>사용자의 주문 메뉴와 갯수</b>를 갖는 <b>일급 컬렉션</b> 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;VisitDay</b></td>
        <td><b>사용자가 방문한 날짜</b>를 갖는 클래스</td>
    </tr>
    <tr>
        <td rowspan="3"><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/f16a8719-281f-4535-a958-c1c62d69cfa2" width="18px">&nbsp;&nbsp;<b>domain<br></b>➜&nbsp;&nbsp;constants</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;Menu</b></td>
        <td><b>주문 가능 메뉴, 가격, 카테고리</b>를 갖는 열거형 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;MenuCategory</b></td>
        <td><b>메뉴의 카테고리</b>를 갖는 열거형 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;PlannerConstraint</b></td>
        <td>이벤트 진행에 필요한 <b>전역 설정</b>(Contraint)을 갖는 열거형 클래스</td>
    </tr>
    <tr><td colspan="3"></td></tr>
    <tr>
        <td rowspan="2"><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/f16a8719-281f-4535-a958-c1c62d69cfa2" width="18px">&nbsp;&nbsp;<b>domain<br></b>➜&nbsp;&nbsp;promotion<br>➜&nbsp;&nbsp;badge</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;BadgeContext</b></td>
        <td>조건에 맞게 <b>배지를 생성</b>하는 전략 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;BadgePromotion</b></td>
        <td><b>배지의 이름, 프로모션 적용 기간, 적용 조건</b>을 갖는 열거형 클래스</td>
    </tr>
    <tr>
        <td rowspan="3"><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/f16a8719-281f-4535-a958-c1c62d69cfa2" width="18px">&nbsp;&nbsp;<b>domain<br></b>➜&nbsp;&nbsp;promotion<br></b>➜&nbsp;&nbsp;discount</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;AppliedDiscountPromotions</b></td>
        <td><b>조건에 맞게 적용된 할인 프로모션</b>을 갖는 <b>일급 컬렉션</b> 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;DiscountContext</b></td>
        <td><b>적용 가능한 <b>할인 프로모션을</b>갖는 <b>일급 컬렉션</b> 전략 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;DiscountPromotion</b></td>
        <td><b>할인 프로모션의 이름, 조건, 적용 기능</b>을 갖는 열거형 클래스</td>
    </tr>
    <tr>
        <td rowspan="3"><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/f16a8719-281f-4535-a958-c1c62d69cfa2" width="18px">&nbsp;&nbsp;<b>domain<br></b>➜&nbsp;&nbsp;promotion<br></b>➜&nbsp;&nbsp;gift</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;AppliedGiftPromotions</b></td>
        <td><b>조건에 맞게 적용된 증정 프로모션</b>을 담는 <b>일급 컬렉션</b> 클래스</td>
    </tr>
    <tr>        
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;GiftContext</b></td>
        <td>적용 가능한 <b>증정 프로모션</b>을 갖는 <b>일급 컬렉션</b> 전략 클래스</td>
    </tr>
    <tr>        
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;GiftPromotion</b></td>
        <td><b>증정 프로모션의 이름, 조건, 갯수</b>를 갖는 열거형 클래스</td>
    </tr>
    <tr>
        <td rowspan="4"><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/f16a8719-281f-4535-a958-c1c62d69cfa2" width="18px">&nbsp;&nbsp;<b>domain<br></b>➜&nbsp;&nbsp;promotion<br></b>➜&nbsp;&nbsp;constants</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;PromotionCondition</b></td>
        <td><b>프로모션의 적용 기간 및 조건, 필요한 배지 정보를</b> 갖는 열거형 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;PromotionPeriod</b></td>
        <td><b>프로모션의 적용 기간에 대한 조건</b>을 상세히 갖는 열거형 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;PromotionType</b></td>
        <td><b>상품의 종류</b>를 갖는 열거형 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;SpecialPromotionPeriod</b></td>
        <td><b>특별 이벤트 적용 기간에 대한 조건</b>을 상세히 갖는 열거형 클래스</td>
    </tr>
    <tr><td colspan="3"></td></tr>
    <tr>
        <td rowspan="1"><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/f16a8719-281f-4535-a958-c1c62d69cfa2" width="18px">&nbsp;&nbsp;<b>domain<br></b>➜&nbsp;&nbsp;utility</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;Parser</b></td>
        <td><b>유효성 검사를 진행</b>하고, <b>조건에 맞게 날짜/숫자를 파싱</b>하는 기능 클래스</td>
    </tr>
    <tr><td colspan="3"></td></tr>
    <tr>
        <td rowspan="3"><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/1de269e3-5ceb-4e91-b9a9-922e81bc0e6a" width="18px">&nbsp;&nbsp;exception</b></td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-lotto-6/assets/112257466/f38b54fc-491f-4249-b277-7c5aec9f024d" height="32px">&nbsp;&nbsp;BusinessException</b></td>
        <td><b>전역에서 에러를 핸들링</b>하는 <b>Custom Exception</b></td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;ErrorCode</b></td>
        <td><b>에러 메세지, 검증 로직</b>을 갖는 <b>전역 예외</b> 열거형 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;ExceptionHandler</b></td>
        <td>사용자의 <b>이상값 입력</b>에 대한 <b>예외처리 핸들링</b> 클래스</td>
    </tr>
    <tr><td colspan="3"></td></tr>
    <tr>
        <td rowspan="2"><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/ea629f71-ed2c-4277-bc10-d93a0758e377" width="18px">&nbsp;&nbsp;view<br></b>➜&nbsp;&nbsp;constants</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;ResponseFormat</b></td>
        <td>사용자의 입력을 바탕으로 <b>포맷팅이 필요한 출력 조건</b> 열거형 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/b8e837c7-bc6a-4bbc-a4c3-267ec11da553" height="32px">&nbsp;&nbsp;ResponseMessage</b></td>
        <td><b>시스템 제약조건을 바탕</b>으로 출력하는 <b>정적 메세지</b> 열거형 클래스</td>
    </tr>
    <tr>
        <td rowspan="1"><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/ea629f71-ed2c-4277-bc10-d93a0758e377" width="18px">&nbsp;&nbsp;view<br></b>➜&nbsp;&nbsp;input</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;InputReader</b></td>
        <td><b>표준 입력</b>을 담당하는 클래스</td>
    </tr>
    <tr>
        <td rowspan="5"><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/ea629f71-ed2c-4277-bc10-d93a0758e377" width="18px">&nbsp;&nbsp;view<br></b>➜&nbsp;&nbsp;output</td>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;ErrorOutputWriter</b></td>
        <td>Exception 상황에서 <b>에러메세지 표준 출력</b>을 담당하는 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;OrderOutputWriter</b></td>
        <td>사용자에게 <b>주문 응답 표준 출력</b>을 담당하는 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;OutputWriter</b></td>
        <td><b>필수 표준 출력 메소드</b> 구현 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;PromotionOutputWriter</b></td>
        <td>사용자에게 <b>혜택 응답 표준 출력</b>을 담당하는 클래스</td>
    </tr>
    <tr>
        <td><b><img align="center" src="https://github.com/woowacourse-precourse/java-racingcar-6/assets/112257466/d3866f61-24f0-4bf2-a68c-1eb18596bf2f" height="32px">&nbsp;&nbsp;VisitDayOutputWriter</b></td>
        <td>사용자에게 <b>방문 월/일 표준 출력</b>을 담당하는 클래스</td>
    </tr>
</table>
</div>

<br>

---

## ✨&nbsp;&nbsp;구현 목록

### 1️⃣ Non-Functional Requirement

<br>

+ [X] 로또
  프로그램은 [MVC 패턴]("https://ko.wikipedia.org/wiki/%EB%AA%A8%EB%8D%B8-%EB%B7%B0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC")에 따라
  설계한다.
+ [X] 로또의 세부 조건이 바뀔 것이라 기대되지는 않지만, [YAGNI]("https://ko.wikipedia.org/wiki/YAGNI") 원칙에 의거해, 필요 구현 요소를 구현하는 것을 목표로 한다.

<br>

### 2️⃣ Functional Requirement (Controller Code Flow)



--------------------------------------------------------

## 🆘&nbsp;&nbsp;고민의 흔적

### 1️⃣&nbsp;&nbsp;&nbsp;Domain과 Service 계층의 책임

- [DDD](https://ko.wikipedia.org/wiki/%EB%8F%84%EB%A9%94%EC%9D%B8_%EC%A3%BC%EB%8F%84_%EC%84%A4%EA%B3%84) 방식으로 개발하면서,
  Domain과 Service Layer간 구분이 모호하다고 느꼈습니다.
- 현재 getter 없는 구조를 지향하면서, 도메인 로직의 책임을 강화하고, 도메인의 멤버변수를 사용하지 않는 부분을 Service로 분리했습니다.
- 해당 기준으로 설계한 구조가 올바르게 분리되었는지 리뷰를 받아보고 싶습니다.

### 2️⃣&nbsp;&nbsp;&nbsp;Dto 계층의 책임

- 지난 리뷰에서, 도메인이 Dto 변환 로직을 갖고 있는 것에 대해 적절하지 못하다는 리뷰를 받았습니다.
- 이번 코드에서 Dto 변환 로직의 책임이 적절한지 리뷰를 받고 싶어요 :)

### 3️⃣️&nbsp;&nbsp;&nbsp;싱글톤 구조 VS Static Method 활용

- 1, 2주차에도 그래왔듯 컨트롤러 Layer에서 싱글톤을 활용하지 않고,
  Static Method를 활용해 각 컨트롤러의 정적 메소드를 사용하는 방식으로 활용했어요.
- 코드리뷰를 진행하면서 많은 분들이 싱글톤 구조로 설계하는 것을 많이 보았는데요.
  여러분은 이번 과제에서 어떤 구조가 더 적절하다고 생각하시나요?
- 캡슐화, 다형성을 해친다는 이야기도 있고, 전역 접근할 필요도 없는데 View 메서드를 정적으로 선언하는 것이 과연 좋은 설계일까요!!?

---------------------------------------------------------

## 👬&nbsp;&nbsp;70명과 함께한 520개의 소중한 코드리뷰 적용기

- [1주차 숫자 야구 Pull Request](https://github.com/woowacourse-precourse/java-baseball-6/pull/1613)
    - 1주차에서 받은 리뷰로 2주차에서는 아래 사항 고민하고 적용할 수 있었어요!
  > 0x00. 어떤 객체가 기능들을 할당하는지도 같이 리드미에 명시되어 있으면 좋을 것 같다.
  0x01. 검증 메소드에서 긍정 조건을 사용하는게 가독성에 좋다.
  0x02. 컨벤션이 없는 상황에서 정적 팩토리 메소드 사용은 혼선을 가져올 수 있다.
  0x03. MVC 패턴에서 모델에서 뷰의 정보를 알아서는 안 된다.
  0x04. 일부 접근지정자가 세밀하게 조정되지 않았다.
  0x05. Open-Closed Principle vs YAGNI
  0x06. Flag 네이밍은 boolean의 의미가 강하다. 정수는 다른 네이밍이 필요하다.
  0x07. 클래스 내부 함수의 선언 순서가 세밀하게 조정될 필요가 있다.
  0x08. 커스텀 예외 선언은 정적 팩토리 메소드보다, 직접 선언하는게 정확하다.
  0x09. Protected 생성자 vs Private 생성자
  0x0a. 조건에 따라 분기하는 것은 검증(Validator)계층이 아니다.
- [2주차 숫자 야구 Pull Reqeust](https://github.com/woowacourse-precourse/java-racingcar-6/pull/356)
    - 지난 리뷰에서 **좋은 활용 법이라 생각되어 활용한 부분과, 아쉽다고 리뷰를 받은 부분**을 아래와 같이 반영하고자 노력했습니다.

<table>
    <tr>
        <th align="center">Review</th>
        <th align="center">Reviewers</th>
    </tr>
    <tr><td colspan="3"></td></tr>
    <tr>
        <td>0x00. 메소드 파라미터를 final로 선언하면 어떤 이점이 있을까?</td>
        <td><b>@IMWoo94</b></td>
    </tr>
      <tr>
        <td>0x01. Static Import를 과하게 사용해, 코드를 읽는데 혼선이 생긴다.</td>
        <td><b>@DonggeonMoon</b></td>
    </tr>
      <tr>
        <td>0x02. Primitive Type Vs Wrapper Class</td>
        <td><b>@JaeHongDev,<br>@developerhongjulee,<br>@IMWoo94,<br>@wooteco-daram</b></td>
    </tr>
      <tr>
        <td>0x03. 도메인과 Dto의 의존성 끊어내기</td>
        <td><b>@JaeHongDev,<br>@Arachneee</b></td>
    </tr>
      <tr>
        <td>0x04. Exception을 try-catch할 때, catch한 Exception도 같이 처리하면 좋다!</td>
        <td><b>@june-777</b></td>
    </tr>
      <tr>
        <td>0x05. Enum의 극한 활용! 조건과 검증 기능까지 수행해보기</td>
        <td><b>@DonggeonMoon,<br>@JaeHongDev</b></td>
    </tr>
</table>

<br>

---

#### 🌱 0x00 `메소드 파라미터를 final로 선언하면 어떤 이점이 있을까?`

> `Primitive type` 은 주소가 아닌 값을
> 메모리 상에 가지고 있기 때문에 `불변의 기능이 제대로 활용`이 됩니다.
> 다만, `Reference type` 은 주소값을 메모리 상에 가지는 것이므로
> 주소는 불변이지만 주소 값을 이용해 객체의 상태는
> 바꿀 수 있는 상황이 될 수 있으므로 생각한 `불변의 기능이 아니다`.

*

*[@IMWoo94 2주차 코드리뷰 중 발췌 후 정리](https://github.com/woowacourse-precourse/java-racingcar-6/pull/356#discussion_r1379566904)
**

- primitive Type에 대해서는 final을 통해 불변 기능을 보장하고,
  Reference Type에 대해서는 불필요한 final 인자를 제거하는 방향으로 설계했습니다!
  좋은 레퍼런스를 소개시켜주신 @IMWoo94님 감사드립니다.

---

#### 🌱 0x01 `Static Import를 과하게 사용해 코드를 읽는데 혼선이 생긴다.`

- 기존에 조금은 기준없이 사용하던 Static Import에 아래와 같은 컨벤션을 개인적으로 정의해 활용했습니다.
  | Type | Description |
  |:--------:|:------------------------------:|
  | Enum | enum.getMessage()와 같이 단순 호출 부분에서 Enum Static Import |
  | Assertions | assertJ와 JUnit5 메소드에 대해 Static Import |

- 해당 부분을 제외하고는 static Import를 피하면서 직관적인 설계를 지향했습니다.

---

#### 🌱 0x02 `Primitive Type Vs Wrapper Class`

> primitive type 과 Wrapper type 의 경우 상황에 따라 바뀔 수 있는 설계 인거 같습니다.
> 꼭 누가 좋다/나쁘다 를 나누기보다는 사용처에 따라 혹은 값이 주소인지 실제 값인지
> 이러한 것들을 알고 계시는게 더 정확하게 판단하여 적절한 사용을 할 수 있을거 같습니다.
> int 타입과 Integer 타입을 예시로 기본 타입의 경우 초기화 값이 필수로 처리가 되므로
> API 연계 시 해당 값이 null 이 아닌 초기화 된 "0" 값으로 전달될 수 있지요.
> 다만 "0"이라는 값도 무언가에 대한 정보를 전달하고
> 실제 데이터를 식별하는데 사용되는 것이라면 무작정 "0" 을 보낼 수 없겟지요.

> 이러할때 래퍼타입이나 객체타입의 null 을 가지는 점을 이용해
> 데이터가 없음을 나타낼 수 있을 겁니다.
> 이거는 각각의 상황에 따라 달라질 수 있는 내용이라
> 정확한 답이 없지 않을가 싶습니다.

*

*[@IMWoo94 2주차 코드리뷰 중 발췌 후 정리](https://github.com/woowacourse-precourse/java-racingcar-6/pull/356#discussion_r1379566904)
**

> 저도 래퍼 클래스를 언제 사용할까, 고민을 해봤어요!
> 래퍼 클래스를 사용한다는 건, '참조형' 으로 사용하겠다는 말과 동일합니다.
> 값이 Null 을 가져야할 때 사용할 수 있다고 생각했어요.
> 하지만, 이 역시 Optional 이란 객체로 감쌀 수 있고,
> 더 명확하게 표현해서 큰 이점은 없을 것 같더라고요.
> 참조형이다 보니 관리를 하지 못하면 NPE 같은 문제도 있을 수 있고요..!

*

*[@wooteco-darm 2주차 코드리뷰 중 발췌 후 정리](https://github.com/woowacourse-precourse/java-racingcar-6/pull/356#discussion_r1379387734)
**

- 그동안 primitive type과 래퍼 타입에 대한 명확한 구분 없이 사용했던 점에 대해서 반성했어요!
- 현재 java 환경에서 구동하는 환경에서 Null 값을 갖는 Integer형을 상수로 선언해서 사용할 필요성을 느끼지 못 했고
  이번 과제에서는 이 부분을 면밀히 고려해, 변수 선언 하나하나 신중하게 사용했습니다!

---

#### 🌱 0x03 `도메인과 Dto의 의존성 끊어내기`

- 지금까지 Getter 사용을 지양한다는 이유로, 도메인에서 Dto 생성 로직을 설계했어요.
- Dto를 생성하는 과정에서 도메인을 의존하게 되었고, 이 의존성을 끊기 위해, 부득이 getter를 활용해
  Dto에서 직접 도메인을 파라미터로 받아, Dto Response를 생성하는 방식으로 개선했습니다.

---

#### 🌱 0x04 `Exception을 try-catch할 때, catch한 Exception도 같이 처리하면 좋다!`

- try-catch문을 통해, 예외를 잡고, 해당 예외를 모두 LottoException으로 전역에서 핸들링하는 과정에서
  LottoException이 상위 Exception에 하위 Exception도 전달할 수 있도록 정적 팩토리 메소드를 개선했습니다.

```java
    private LottoException(
        ErrorMessage errorMessage,
        Exception exception
        ){
        super(errorMessage.getMessage(),exception);
        }

private LottoException(ErrorMessage errorMessage){
        super(errorMessage.getMessage());
        }

public static LottoException of(
        ErrorMessage errorMessage,
        Exception exception
        ){
        return new LottoException(errorMessage,exception);
        }

public static LottoException from(ErrorMessage errorMessage){
        return new LottoException(errorMessage);
        }
```

- 하위 예외를 catch해서 LottoException으로 던지는 경우 `of`를 활용하고
  예외 상황을 LottoException으로 핸들링 하는 경우 `from` 메소드를 활용합니다.

```mermaid
graph TD;
    NumberFormatException --> LottoException
    LottoException --> IllegalArgumentException
```

- NumberFormatException이 발생하면 해당 예외를 포함해 LottoException에 위임합니다.
- LottoException이 발생하면 해당 예외 메세지와 하위 예외를 IllegalArgumentException에 위임합니다.

--- 

#### 🌱 0x05 `Enum의 극한 활용! 조건과 검증 기능까지 수행해보기`

> [Exception을 생성할 때 Enum 내부에서 Exception을 발생시키기](https://github.com/cheese10yun/spring-guide/blob/master/docs/exception-guide.md)
> @JaeHongDev
[Enum을 사용한 상수값 관리](https://medium.com/webeveloper/enum%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%83%81%EC%88%98%EA%B0%92-%EA%B4%80%EB%A6%AC-a3e3fb73eae1)
> @DonggeonMoon
[Enum 활용사례 3가지](https://jojoldu.tistory.com/137) @DonggeonMoon

- 이번에 활용한 내 친구 `enum`을 소개합니다.

```java
public enum PrizeGrade {
    HIT_SIX(
            SIX,
            always -> true,
            2_000_000_000
    ),
    HIT_FIVE_AND_BONUS(
            FIVE,
            keep -> keep,
            30_000_000
    ),
    HIT_FIVE(
            FIVE,
            reverse -> !reverse,
            1_500_000
    );

    private final PrizeMatchingCount prizeMatchingCount;
    private final UnaryOperator<Boolean> matchingBonus;
    private final int prizeAmount;
```

- 사용자가 상품 번호를 맞춘 갯수가 같은 `HIT_FIVE`, `HIT_FIVE_AND_BONUS`
  케이스를 구분하는 로직을 짜는데 굉장히 많은 시간을 쏟았어요.
- EnumMap을 활용해 최종 결과를 산출하기 때문에, Enum에서 검증과 구현을 마치고 싶었어요!
  (무엇보다 if문 덕지덕지 하면서 분기하기는 너무 싫었고, 로또 번호가 10000개라면? 끔찍;)
- Enum 자체가 `UnaryOperator`를 통해 boolean 검증 람다문을 갖도록 설계하면서 해결했습니다!
    - 보너스와 무관하게 산출하는 케이스 `always -> true`
    - bonus가 true여야만 할 때 케이스 `keep -> keep`
    - bonus가 false여야만 할 때 케이스 `reverse -> !reverse`

```java
public class FinalResults {
    private final EnumMap<PrizeGrade, Integer> finalResults;
```

- 최종 결과도 Grade를 Key로, 해당 Grade의 갯수를 Value로 만들면서 예쁜 일급 컬렉션도 구현할 수 있었어요!
- 다만, 이 부분에서 View가 도메인 계층의 Enum을 의존하는 것이 아닌가? 하는 고민을 품고 있어요..!

- Exception도 Enum에서 수행할 수 있다는 레퍼런스를 얻었고, 차후 활용할 기회가 있다면 활용해보고 싶어요!

---


---

- 재사용성을 목표로 개발한다. 무조건 재사용성!!
    - 왜냐하면 총 혜택 금액에 따라 다른 이벤트 배지를 부여
    - 이 배지는 2024 새해 이벤트에서 활용할 예정
    - 배지에 따라 새해 이벤트 참여 시, 각각 다른 새해 선물을 증정할 예정입니다.
- 12월 이벤트 참여 고객의 5%가 내년 1월 새해 이벤트에 재참여하는 것
- 내년 1월 새해 이벤트때 재사용 할 수 있도록, 미친 확장성 / 재사용성을 확보하자!!

- [X] 사용자에게 방문 날자 메세지 출력 후 요청 -> return VisitingDate
    - `안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.`
    - [X] 사용자에게 예상 방문 날짜 입력 (1~31)
        - [X] 2023년 12월 기준으로 달력에 없는 날짜 예외처리
        - [X] Parser가 파싱할 수 없는 문자열 예외처리
    - [X] 사용자가 메뉴 메세지 입력 -> return MenuOrders
        - [X] `주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)`
        - [X] 자체 제약조건 : 음식은 무조건 한글이다. (제로콜라, 타파스가 영어임을 생각했을때)
        - [X] 콤마로 끝나거나, 스페이스바가 들어가거나, 음식 이름에 한글만을 포함하지 않거나, whiteSpace를 포함하거나 -> 검증 메소드 처리
        - [X] 단일 메뉴 input이 1~20 범위 밖이면 예외처리 -> 정규표현식
        - [X] 메뉴의 갯수가 0이하일 경우 예외처리 `"[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."` -> 정규표현식
        - [X] 음식-숫자,음식-숫자,음식,숫자 형식이 아닐경우 예외처리 `"[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."` -> 정규표현식
        - [X] String Input을 콤마 단위로 파싱하기 (파싱 후 `한글-숫자` 형태 검증) -> 정규표현식
        - [X] 검증 된 `한글-숫자` 형태의 문자를 Map에 담아 MenusOrder 객체에 생성 및 이후 검증 위임
        - [X] 메뉴판에 없는 메뉴 예외처리 `"[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."`
        - [X] 메뉴 전체의 총 합이 21개 이상일 경우 예외처리 `"[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."`
        - [X] 음료만 주문하면 예외처리 `[ERROR] 음료만 주문할 수 없습니다.`

        - [X] 주문 메뉴 출력
        - [X] 할인 전 총 주문 금액 출력

        - [X] DailyDiscount (12/1 ~ 12/25)
        - [X] WeekdayDiscount 평일 할인 (일,월,화,수,목) 디저트 메뉴당 2,023원 할인

        - [X] WeekendDiscount 주말 할인 (금, 토) 메인 메뉴 1개당 2,023원 할인
        - [X] SpecialDiscount 매주 일요일 + 크리스마스(별이 있으면) 총 주문금액 1,000원 할인
        - [X] 특별 할인 (매주 일요일 + 크리스마스 당일) : 총 주문금액에서 1,000원 할인 -> 날짜 enum 하드코딩

        - [X] 최종 할인가를 종합해 증정 이벤트 판별
        - [X] 증정 이벤트 : 총 주문 금액 12만 이상시 샴페인 증정(혜택 25,000원!!)
        - [X] 마지막 최종 주문금액 산출 후 // 혜택 금액에 증정가 추가

        - [X] 새해 선물 : 총 혜택 금액에 따른 배지 부여
            - [X] 5000원 - 별
            - [X] 10000원 - 트리
            - [X] 20000원 - 산타

        - [Getter 방어적 복사 사용해보자!](https://github.com/woowacourse-precourse/java-lotto-6/pull/1941/files#r1389542048)
